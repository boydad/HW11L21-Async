# Пакетная обработка команд - Ассинхронная версия


## Условие задания

Основная цель переработать Задание 7 так, чтобы ввод данных контролировался внешним кодом. Интерфейс описан в файле async.h. Инициатором обмена будет  выступать внешний код, вместо привычной входной точки main() будет три - connect(), receive() и disconnect(). Порядок вызова следующий: 

* Вызывается connect() с размером блока команд. Сохраняется значение возврата. Значение никак не интерпретируется и служит только для передачи контекста;
* Вызывается receive() с передачей указателя на начало буфера, размера буфера и контекста. Вызов повторяемый;
* Вызывается disconnect() с передачей контекста. Вызов разрушает контекст.

Необходимо реализовать эти функции так, чтобы сохранить прежнюю функциональность проекта и добавить новую возможность. Реализация должна допускать множественные вызовы connect(). Вызовы receive() с разными контекстами не должны мешать друг другу. 

В зависимости от внутренней реализации может возникнуть требование иметь одинаковый размер блока для всех команд. Нет цели вносить столь глубокие изменения. Если потенциальная возможность иметь разные размеры очереди влечет глубокую переработку, функция connect() должна вернуть nullptr.

Вызовы могут осуществляться из разных потоков, однако вызовы с одинаковым контекстом выполняются из одного и того же потока.

Опционально реализовать возможность вызывать все функции из любых потоков.

Опционально взять за основу вместо однопоточной версии из [Задание 7](https://github.com/boydad/HW7L16-Cmd) многопоточную реализацию из [Задания 10](https://github.com/boydad/HW10L20-Threads).